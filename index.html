<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>The Letter N</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css'>
</head>

<body style="background-color: #000;">

<script src="js/threejs/build/three.js"></script>

<script src="js/threejs/js/controls/TrackballControls.js"></script>
<script src="js/threejs/js/effects/AsciiEffect.js"></script>
<script src="js/threejs/js/loaders/STLLoader.js"></script>

<script src="js/threejs/WebGL.js"></script>

<script>
    if (WEBGL.isWebGLAvailable() === false) {
        document.body.appendChild(WEBGL.getWebGLErrorMessage());
    }

    var camera, scene, renderer, effect;
    var controls;
    var sword, plane;
    var start = Date.now();
    var rotationAmplitude;

    init();
    animate();

    function init() {
        camera = new THREE.PerspectiveCamera(20, window.innerWidth / window.innerHeight, 1, 4000);

        rotationAmplitude = 550;

        camera.position.x = -200;
        camera.position.y = 0;
        camera.position.z = 0;

        controls = new THREE.TrackballControls(camera);

        scene = new THREE.Scene();

        var light = new THREE.PointLight(0xffffff);
        light.position.set(0, 0, 0);
        scene.add(light);

        var light = new THREE.PointLight(0xffffff, 0.25);
        light.position.set(-500, -500, -500);
        scene.add(light);

        // Load sword STL file
        var loader = new THREE.STLLoader();
        var material = new THREE.MeshPhongMaterial({color: 0xAAAAAA, specular: 0x111111, shininess: 200});

        loader.load('js/threejs/models/stl/binary/letter-n-2.stl', function (geometry) {
            var mesh = new THREE.Mesh(geometry, material);
            mesh.position.set(100, -25, -20);
            mesh.rotation.set(-Math.PI / 2, -Math.PI / 2, -Math.PI / 2);
            mesh.scale.set(5, 5, 5);
            mesh.castShadow = true;
            mesh.receiveShadow = true;

            scene.add(mesh);

        })

        renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);

        effect = new THREE.AsciiEffect(renderer, ' n', {invert: true});
        effect.setSize(window.innerWidth, window.innerHeight);
        effect.domElement.style.color = 'black';
        effect.domElement.style.backgroundColor = 'white';

        // Special case: append effect.domElement, instead of renderer.domElement.
        // AsciiEffect creates a custom domElement (a div container) where the ASCII elements are placed.
        document.body.appendChild(effect.domElement);
        //
        window.addEventListener('resize', onWindowResize, false);
    }

    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize(window.innerWidth, window.innerHeight);

        effect.setSize(window.innerWidth, window.innerHeight);
    }

    //
    function animate() {
        requestAnimationFrame(animate);
        render();
    }

    function render() {
        var timer = Date.now() * 0.00065;

        //Allow User scroll
        rotationAmplitude = Math.sqrt(Math.pow(camera.position.x, 2) + Math.pow(camera.position.z, 2));

        controls.update();

        effect.render(scene, camera);
    }
</script>
</body>
</html>